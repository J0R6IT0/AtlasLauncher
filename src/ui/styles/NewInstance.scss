@import 'mixins';

#new-instance {
    height: 100%;
    width: 100%;
    gap: 0.5rem;
    transition: all 0.2s ease-in-out;

    @include flex-center;

    .flavour {
        overflow: hidden;
        height: 100%;
        flex-basis: 100%;
        transition: all 0.2s ease-in-out;
        border-radius: var(--primary-border-radius);

        @include flex-center;

        position: relative;

        img {
            height: 100%;
            width: 101%;
            object-fit: cover;
            opacity: 1;
            transition: all 0.2s ease-in-out;
            will-change: transform;
        }

        .flavour-icon {
            z-index: 10;
            width: 100%;
            position: absolute;
            color: var(--secondary-color);
            font-weight: 500;
            font-size: 1.5rem;
            transition: all 0.2s ease-in-out;
            text-shadow: 0 0 0.3rem rgb(0 0 0 / 50%);

            @include flex-column;

            svg {
                width: 50%;
                height: auto;
                aspect-ratio: 1 / 1;
                filter: drop-shadow(0 0 0.3rem rgb(0 0 0 / 40%));
            }
        }

        .flavour-wrapper {
            position: absolute;

            @include flex-column;

            justify-content: flex-start;
            height: 100%;
            width: 100%;
            z-index: 20;
            transition: all 0.2s ease-in-out;
            background: color-mix(
                in srgb,
                var(--menu-color) 60%,
                transparent
            );
            transform: translate3d(0, 100%, 0);

            .flavour-info {
                @include flex-center;

                gap: 0.3rem;
                color: var(--primary-text-color);
                font-size: 1.2rem;
                height: 3rem;
                transition: all 0.2s ease-in-out;
                margin-bottom: 2.5rem;

                span {
                    transition: all 0.2s ease-in-out;
                }

                svg {
                    transition: all 0.2s ease-in-out;
                }
            }

            @include pseudo-elem;

            &::after {
                background: color-mix(
                    in srgb,
                    var(--menu-color) 50%,
                    transparent
                );
                opacity: 0;
                transition: all 0.2s ease-in-out;
                z-index: -1;
            }

            img {
                height: 2rem;
                width: 2rem;
            }
        }

        &:hover:not(.selected) {
            img {
                transform: scale(1.05);
            }

            .flavour-icon {
                opacity: 0;
            }

            .flavour-wrapper {
                transform: translate3d(0, calc(100% - 3rem), 0);
            }
        }

        &::after {
            transition: all 0.3s ease-in-out;
        }

        @include pseudo-elem-opacity-inverse(
            radial-gradient(
                circle,
                var(--primary-color) 0%,
                rgba(0, 0, 0, 30%) 50%
            )
        );

        &.selected {
            flex-basis: 300%;

            .flavour-icon {
                opacity: 0;
            }

            &::after {
                opacity: 0;
            }

            .flavour-wrapper {
                transform: translate3d(0, 0, 0);

                &::after {
                    opacity: 1;
                }
            }

            .flavour-info {
                transform: translate3d(0, 1rem, 0);

                span {
                    transform: translate3d(0.1rem, 0, 0);
                }

                svg {
                    transform: scale(1.3) translate3d(-0.1rem, 0, 0);
                }
            }
        }
    }
}
